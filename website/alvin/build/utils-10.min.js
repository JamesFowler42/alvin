function mUtil(){return{emailUrl:"json_email.php",emailToken:"alvin20",okResponse:"Sent OK",failResponse:"Failed to send with ",failGeneral:"Failed to send"}}function hrsmin(c){var a=Math.floor(c/60);var b=c%60;return fixLen(String(a))+":"+fixLen(String(b))}Date.prototype.format=function(d){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"i+":this.getHours()+1,"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(d)){d=d.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var c in e){if(new RegExp("("+c+")").test(d)){d=d.replace(RegExp.$1,RegExp.$1.length==1?e[c]:("00"+e[c]).substr((""+e[c]).length))}}if(/(N+)/.test(d)){d=d.replace(RegExp.$1,b[this.getMonth()])}if(/(W+)/.test(d)){d=d.replace(RegExp.$1,a[this.getDay()])}return d};Date.prototype.addMinutes=function(b){var a=new Date(this.getTime());return new Date(a.getTime()+b*60000)};function fixLen(a){if(a==null||a.length>1){return a}return"0"+a}function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(location.search);return b==null?"":decodeURIComponent(b[1].replace(/\+/g," "))}function setScreenMessageBasedOnVersion(a){$(".versproblem").show();$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"});$.getJSON("currentversion.json?v="+new Date().getTime(),function(d){if(typeof d!=="undefined"&&typeof d.version!=="undefined"){var c=parseInt(d.version,10);var b=parseInt(a,10);$(".versproblem").hide();if(c>b){$(".verswarning").show()}else{if(c<b){$(".versbeta").show()}}}}).error(function(b){$(".versproblem").text("Error attempting to find the current version: "+JSON.stringify(b))})}function scaleToViewport(){var a=$(window).width();if(a>800){a=800}else{if(a<320){a=320}}a-=5;$(".vpwidth").width(a);$(".vpheight").height(a*250/318);if(typeof document.plot1!=="undefined"){document.plot1.replot()}if(typeof document.plot2!=="undefined"){document.plot2.replot()}}function adjustForViewport(){scaleToViewport();$(window).resize(scaleToViewport)}function sendMailViaServer(a,e){try{var d="email="+encodeURIComponent(JSON.stringify(a));var c=new XMLHttpRequest();c.open("POST",mUtil().emailUrl,true);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.setRequestHeader("X-Client-token",mUtil().emailToken);c.onreadystatechange=function(f){if(c.readyState==4){if(c.status==200){e(1,mUtil().okResponse)}else{e(0,mUtil().failResponse+c.status)}}};c.onerror=function(f){e(0,mUtil().failGeneral)};c.send(d)}catch(b){e(0,mUtil().failResponse+b.message)}}function validateEmail(a){var b=/[^\s@]+@[^\s@]+\.[^\s@]+/;return b.test(a)}function safeTrim(b){try{return b.trim()}catch(a){return b}};